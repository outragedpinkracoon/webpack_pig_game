{"version":3,"sources":["webpack:///webpack/bootstrap 97f1a24f6d87e4e354a8","webpack:///./src/app.js","webpack:///./src/views/game_view.js","webpack:///./src/views/player_view.js","webpack:///./src/views/turn_view.js","webpack:///./src/game_logic/player.js","webpack:///./src/game_logic/game.js","webpack:///./src/game_logic/turn.js","webpack:///./src/game_logic/win_checker.js","webpack:///./src/game_logic/dice.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,gCAA+B,uCAAuC;;AAEtE;AACA;;;;;;;ACfA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,sCAAqC,qDAAqD;AAC1F,sCAAqC,qDAAqD;AAC1F,iCAAgC,yDAAyD;AACzF;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACtCA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;;AAEA;;;;;;;ACzCA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACNA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;;;;;ACjDA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;;;;;AC5DA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;;;AAGA;;;;;;;ACpCA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,sB","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 97f1a24f6d87e4e354a8\n **/","var GameView = require('./views/game_view');\nvar Player = require('./game_logic/player');\nvar Game = require('./game_logic/game');\nvar Dice = require('./game_logic/dice');\n\nwindow.onload = function(){\n  var player1 = new Player(\"Player 1\");\n  var player2 = new Player(\"Player 2\");\n\n  var dice = new Dice(6)\n  var game = new Game(player1, player2, dice, 20);\n\n  var gameView = new GameView({ parentEl: document.body, model: game })\n\n  gameView.render();\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/app.js\n ** module id = 0\n ** module chunks = 0\n **/","var PlayerView = require('./player_view');\nvar TurnView = require('./turn_view');\n\nvar GameView  = function(options){\n  this.parentEl = options.parentEl;\n  this.model = options.model;\n  this.el = document.createElement('div');\n  this.parentEl.appendChild(this.el)\n  this.player1View = new PlayerView({ parentEl: document.body, model: this.model.player1 });\n  this.player2View = new PlayerView({ parentEl: document.body, model: this.model.player2 });\n  this.turnView = new TurnView({ parentEl: document.body, model: this.model.currentTurn })\n}\n\nGameView.prototype = {\n  render: function(){\n    this.player1View.render();\n    this.player2View.render();\n\n\n    var nextTurnButton = document.createElement('button');\n    nextTurnButton.innerText = \"Next Turn\";\n\n    nextTurnButton.onclick = function(){\n      if(this.model.currentTurn){\n        this.model.completeTurn();\n      }\n      this.player1View.render();\n      this.player2View.render();\n      this.model.nextTurn();\n      this.turnView.updateTurn(this.model.currentTurn);\n    }.bind(this);\n\n    if(!this.model.gameWon()){\n      this.el.appendChild(nextTurnButton);\n    }\n  }\n}\n\nmodule.exports = GameView;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/views/game_view.js\n ** module id = 1\n ** module chunks = 0\n **/","var PlayerView  = function(options){\n  this.parentEl = options.parentEl;\n  this.model = options.model;\n  this.el = document.createElement('div');\n  this.parentEl.appendChild(this.el)\n}\n\nPlayerView.prototype = {\n  render: function(){\n    this.el.innerHTML = \"\";\n    var name = document.createElement('p');\n    var winner = document.createElement('p');\n    var score = document.createElement('p');\n    name.innerHTML = this.model.name;\n    score.innerHTML = this.model.score;\n    winner.innerHTML = \"Winner!\";\n    \n    if(!this.model.hasWon) {\n      winner.style.display = \"none\";\n    }\n\n    this.el.appendChild(name);\n    this.el.appendChild(score);\n    this.el.appendChild(winner);\n  }\n}\n\nmodule.exports = PlayerView;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/views/player_view.js\n ** module id = 2\n ** module chunks = 0\n **/","var TurnView  = function(options){\n  this.parentEl = options.parentEl;\n  this.model = options.model;\n  this.el = document.createElement('div');\n  this.parentEl.appendChild(this.el)\n  this.diceRoll = [];\n}\n\nTurnView.prototype = {\n  updateTurn: function(turn){\n    this.model = turn;\n    this.diceRoll = [];\n    this.render();\n  },\n  render: function(){\n    this.el.innerHTML = \"\";\n\n    var currentPlayerEl = document.createElement('p');\n    currentPlayerEl.innerHTML = \"Current Player: \" + this.model.player.name;\n    this.el.appendChild(currentPlayerEl);\n\n    var currentScore = document.createElement('p');\n    currentScore.innerHTML = this.model.score;\n    this.el.appendChild(currentScore);\n\n    var diceRollEl = document.createElement('div')\n    diceRollEl.innerHTML = \"Dice: \" + this.diceRoll.join(\",\");\n    this.el.appendChild(diceRollEl);\n\n    if(!this.model.finished){\n      var rollButton = document.createElement('button');\n      rollButton.innerText = \"Roll\";\n      rollButton.onclick = function(){\n        this.diceRoll = this.model.roll();\n        this.render();\n      }.bind(this);\n      this.el.appendChild(rollButton);\n    }\n  }\n}\n\nmodule.exports = TurnView;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/views/turn_view.js\n ** module id = 3\n ** module chunks = 0\n **/","var Player = function(name){\n  this.name = name;\n  this.score = 0;\n  this.hasWon = false;\n}\n\nmodule.exports = Player;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/game_logic/player.js\n ** module id = 4\n ** module chunks = 0\n **/","var Turn = require('./turn')\nvar WinChecker = require('./win_checker')\n\nvar Game = function(player1, player2, dice, target){\n  this.player1 = player1;\n  this.player2 = player2;\n  this.dice = dice;\n  this.currentTurn = null;\n  this.lastTurn = false;\n  this.winChecker = new WinChecker(target);\n}\n\nGame.prototype = {\n  turnInPlay: function(){\n    return this.currentTurn && !this.currentTurn.finished;\n  },\n  nextTurn: function(){\n    if(this.turnInPlay() || this.gameWon()) return;\n    this.currentTurn = new Turn(this.nextPlayer(), this.dice);\n  },\n  roll: function(){\n    return this.currentTurn.roll();\n  },\n  completeTurn:function(){\n    if(this.gameWon()) return;\n    this.currentTurn.exit()\n    this.winChecker.checkWin(this.player1, this.player2)\n  },\n  gameWon:function(){\n    return this.player1.hasWon || this.player2.hasWon\n  },\n\n  winningPlayer: function(){\n    if(!this.gameWon) return;\n    if(this.player1.hasWon) {\n      return this.player1\n    }\n    return this.player2\n  },\n\n  //TODO, this is crude needs fixed\n  nextPlayer: function(){\n    if(!this.currentTurn) return this.player1;\n    if(this.currentTurn.player === this.player1) return this.player2;\n    \n    return this.player1;\n  }\n}\n\nmodule.exports = Game;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/game_logic/game.js\n ** module id = 5\n ** module chunks = 0\n **/","var Turn = function(player, dice){\n  this.player = player;\n  this.dice = dice;\n  this.score = 0;\n  this.finished = false;\n}\n\nTurn.prototype = {\n  roll: function(){\n    console.log('turn rolling', this.score)\n\n    if(this.finished) return;\n\n    var result1 = this.dice.roll()\n    var result2 = this.dice.roll()\n\n    turnInfo = this.checkRolls(result1, result2);\n\n    if(turnInfo.finished) this.finished = true;\n    this.score += turnInfo.score;\n\n    console.log('turn score', this.score)\n\n    return([result1, result2])\n  },\n\n  checkRolls: function(result1, result2){\n    var score = 0;\n    if(!this.hasAOne(result1, result2)) {\n      score = result1 + result2    \n    }\n    \n    if(this.bothEqualOne(result1, result2)){\n      score = 25;\n    }\n\n    var turnFinished = score == 0;\n    return {\n      score: score,\n      finished: turnFinished\n    }\n  },\n\n  //TODO this is crude\n  hasAOne: function(firstNumber, secondNumber){\n    return (firstNumber === 1 || secondNumber === 1)\n  },\n\n  bothEqualOne: function(firstNumber, secondNumber){\n    return firstNumber === 1 && secondNumber === 1\n  },\n\n  exit: function(){\n    this.finished = true;\n    this.player.score += this.score\n    return this.score;\n  }\n\n}\n\nmodule.exports = Turn;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/game_logic/turn.js\n ** module id = 6\n ** module chunks = 0\n **/","var WinChecker = function(winningScore){\n  this.onLastTurn = false;\n  this.winningScore = winningScore || 100;\n}\n\nWinChecker.prototype = {\n  checkWin:function(player1, player2){\n    if(this.onLastTurn){\n      this.lastTurnWinner(player1, player2);\n      return\n    };\n\n    if(player2.score >= this.winningScore){\n      player2.hasWon = true\n      return\n    }else if(player1.score >= this.winningScore){\n      this.onLastTurn = true\n    }\n  },\n\n  lastTurnWinner:function(player1, player2){\n    if(player1.score == player2.score){\n      player1.hasWon = true;\n      player2.hasWon = true;\n      return;\n    }\n    if(player1.score > player2.score){\n      player1.hasWon = true;\n    }else{\n      player2.hasWon = true;\n    }\n\n  }\n}\n\n\nmodule.exports = WinChecker;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/game_logic/win_checker.js\n ** module id = 7\n ** module chunks = 0\n **/","var Dice = function(sides){\n  this.sides = sides;\n}\n\nDice.prototype = {\n  roll: function(){\n    return Math.ceil(Math.random() * this.sides);\n  }\n}\n\nmodule.exports = Dice\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/game_logic/dice.js\n ** module id = 8\n ** module chunks = 0\n **/"],"sourceRoot":""}